const fs = require('fs');
const path = require('path');

// Créer un PNG minimal valide (1x1 pixel transparent)
const createMinimalPNG = () => {
  return Buffer.from([
    0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A, // PNG signature
    0x00, 0x00, 0x00, 0x0D, // IHDR chunk length
    0x49, 0x48, 0x44, 0x52, // IHDR
    0x00, 0x00, 0x00, 0x01, // Width: 1
    0x00, 0x00, 0x00, 0x01, // Height: 1
    0x08, 0x06, 0x00, 0x00, 0x00, // Bit depth: 8, Color type: 6 (RGBA), Compression: 0, Filter: 0, Interlace: 0
    0x1F, 0x15, 0xC4, 0x89, // CRC
    0x00, 0x00, 0x00, 0x0A, // IDAT chunk length
    0x49, 0x44, 0x41, 0x54, // IDAT
    0x78, 0x9C, 0x62, 0x00, 0x00, 0x00, 0x02, 0x00, 0x01, // Compressed data
    0xE2, 0x21, 0xBC, 0x33, // CRC
    0x00, 0x00, 0x00, 0x00, // IEND chunk length
    0x49, 0x45, 0x4E, 0x44, // IEND
    0xAE, 0x42, 0x60, 0x82  // CRC
  ]);
};

// Créer un PNG coloré pour l'icône (48x48 pixels bleu)
const createIconPNG = () => {
  return Buffer.from([
    0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A,
    0x00, 0x00, 0x00, 0x0D, 0x49, 0x48, 0x44, 0x52,
    0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x30,
    0x08, 0x02, 0x00, 0x00, 0x00, 0x6E, 0x1E, 0xF2,
    0x35, 0x00, 0x00, 0x00, 0x15, 0x49, 0x44, 0x41,
    0x54, 0x78, 0x9C, 0x62, 0xFC, 0x0F, 0x00, 0x01,
    0x01, 0x00, 0x01, 0x00, 0x02, 0x00, 0x01, 0x00,
    0x02, 0x00, 0x01, 0x00, 0x02, 0x00, 0x01, 0x7E,
    0x1B, 0x69, 0x2A, 0x00, 0x00, 0x00, 0x00, 0x49,
    0x45, 0x4E, 0x44, 0xAE, 0x42, 0x60, 0x82
  ]);
};

const assetsDir = path.join(__dirname, 'assets');

// Créer les fichiers d'assets
const files = [
  { name: 'icon.png', data: createIconPNG() },
  { name: 'adaptive-icon.png', data: createIconPNG() },
  { name: 'splash.png', data: createIconPNG() },
  { name: 'favicon.png', data: createMinimalPNG() }
];

files.forEach(file => {
  const filePath = path.join(assetsDir, file.name);
  fs.writeFileSync(filePath, file.data);
  console.log(`Créé: ${file.name}`);
});

console.log('Assets créés avec succès!');
